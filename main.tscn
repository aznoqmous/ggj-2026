[gd_scene format=3 uid="uid://blfxxb66ypa2d"]

[ext_resource type="Script" uid="uid://cjof8gvfeji7b" path="res://scripts/main.gd" id="1_1bvp3"]
[ext_resource type="Texture2D" uid="uid://d3v8eynat77lb" path="res://icon.svg" id="1_ig7tw"]
[ext_resource type="PackedScene" uid="uid://dsorqsd0e6gp8" path="res://scenes/shaman.tscn" id="2_h2yge"]
[ext_resource type="PackedScene" uid="uid://bf01jl6xk7ctv" path="res://scenes/mask.tscn" id="3_1bvp3"]
[ext_resource type="Script" uid="uid://cr7j2lefxfntf" path="res://scripts/resources/level_resource.gd" id="4_7mycd"]
[ext_resource type="Resource" uid="uid://eosiecqvngos" path="res://resources/levels/level_4-1.tres" id="5_074og"]
[ext_resource type="Resource" path="res://resources/levels/level_10-1.tres" id="5_d13ii"]
[ext_resource type="Resource" uid="uid://cdlagddcwbyup" path="res://resources/levels/level_4-2.tres" id="6_cegan"]
[ext_resource type="Script" uid="uid://phkh2o26tdnn" path="res://scripts/main_camera.gd" id="7_4c57u"]
[ext_resource type="Resource" path="res://resources/levels/level_5-1.tres" id="7_82xsv"]
[ext_resource type="Texture2D" uid="uid://da22mvr2858k0" path="res://sprites/fire-spritesheet.png" id="8_5vw27"]
[ext_resource type="Resource" path="res://resources/levels/level_5-2.tres" id="8_getpj"]
[ext_resource type="Texture2D" uid="uid://dcbwll7yw8ds7" path="res://sprites/particle.png" id="9_kek77"]
[ext_resource type="Resource" path="res://resources/levels/level_6-1.tres" id="9_ryguw"]
[ext_resource type="Resource" path="res://resources/levels/level_6-2.tres" id="10_d13ii"]
[ext_resource type="Resource" path="res://resources/levels/level_6-3.tres" id="11_1u8w0"]
[ext_resource type="PackedScene" uid="uid://xmjk6prny0i5" path="res://scenes/masks/mask_clock.tscn" id="11_efxa6"]
[ext_resource type="Resource" path="res://resources/levels/level_6-4.tres" id="12_0odxb"]
[ext_resource type="PackedScene" uid="uid://bbmyiyfx1lg4m" path="res://scenes/masks/mask_swap.tscn" id="12_dg77c"]
[ext_resource type="Resource" path="res://resources/levels/level_6-5.tres" id="13_1u8w0"]
[ext_resource type="Resource" path="res://resources/levels/level_7-1.tres" id="14_1u8w0"]
[ext_resource type="Resource" path="res://resources/levels/level_8-1.tres" id="15_0odxb"]
[ext_resource type="Resource" path="res://resources/levels/level_8-2.tres" id="16_lswn8"]
[ext_resource type="Resource" path="res://resources/levels/level_9-1.tres" id="17_a6jrf"]

[sub_resource type="Gradient" id="Gradient_5vw27"]
offsets = PackedFloat32Array(0, 0.20366132, 0.49199083, 0.73913044, 1)
colors = PackedColorArray(0, 0, 0, 0, 1, 0.31520224, 0.015122294, 1, 1, 0.234375, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_kek77"]
gradient = SubResource("Gradient_5vw27")

[sub_resource type="Curve" id="Curve_4c57u"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.24833703, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_efxa6"]
curve = SubResource("Curve_4c57u")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_272bh"]
emission_shape = 1
emission_sphere_radius = 1.0
angle_min = -360.0
angle_max = 360.00003
direction = Vector3(0, 1, 0)
spread = 0.0
initial_velocity_max = 1.0
angular_velocity_min = -4.000016
angular_velocity_max = 3.9999838
gravity = Vector3(0, 0, 0)
linear_accel_min = 4.9999976
linear_accel_max = 9.999997
scale_min = 2.0
scale_max = 3.0
scale_curve = SubResource("CurveTexture_efxa6")
color_ramp = SubResource("GradientTexture1D_kek77")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5vw27"]
transparency = 2
alpha_scissor_threshold = 0.7
alpha_antialiasing_mode = 0
blend_mode = 1
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("8_5vw27")
emission_enabled = true
emission = Color(0.42791748, 1, 0.1953125, 1)
emission_energy_multiplier = 0.3
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 6
particles_anim_v_frames = 5
particles_anim_loop = true

[sub_resource type="QuadMesh" id="QuadMesh_kek77"]
material = SubResource("StandardMaterial3D_5vw27")

[sub_resource type="Curve" id="Curve_efxa6"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.7494457, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_dg77c"]
curve = SubResource("Curve_efxa6")

[sub_resource type="Curve" id="Curve_0odxb"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_lswn8"]
curve = SubResource("Curve_0odxb")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ycdy4"]
emission_shape = 1
emission_sphere_radius = 1.5
gravity = Vector3(0, 5, 0)
scale_min = 0.01
scale_max = 0.02
scale_curve = SubResource("CurveTexture_dg77c")
color = Color(1, 0.6451749, 0.14453125, 1)
turbulence_noise_strength = 0.1
turbulence_noise_speed_random = 1.0
turbulence_influence_over_life = SubResource("CurveTexture_lswn8")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_w48qg"]
transparency = 1
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("9_kek77")
emission_enabled = true
emission = Color(0.3453346, 1, 0.18359375, 1)
emission_energy_multiplier = 16.0
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id="QuadMesh_vivmo"]
material = SubResource("StandardMaterial3D_w48qg")

[sub_resource type="PlaneMesh" id="PlaneMesh_1bvp3"]
size = Vector2(100, 100)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_074og"]

[sub_resource type="Sky" id="Sky_cegan"]
sky_material = SubResource("ProceduralSkyMaterial_074og")

[sub_resource type="Environment" id="Environment_dg77c"]
background_mode = 2
sky = SubResource("Sky_cegan")
ambient_light_source = 3
ambient_light_sky_contribution = 0.05
glow_enabled = true
glow_bloom = 0.4
fog_enabled = true
fog_light_color = Color(0.032226563, 0.06852918, 0.125, 1)

[node name="Main" type="Node3D" unique_id=906742551]
script = ExtResource("1_1bvp3")
mask_scene = ExtResource("3_1bvp3")
shaman_scene = ExtResource("2_h2yge")
levels = Array[ExtResource("4_7mycd")]([ExtResource("5_074og"), ExtResource("6_cegan"), ExtResource("7_82xsv"), ExtResource("8_getpj"), ExtResource("9_ryguw"), ExtResource("10_d13ii"), ExtResource("11_1u8w0"), ExtResource("12_0odxb"), ExtResource("13_1u8w0"), ExtResource("14_1u8w0"), ExtResource("15_0odxb"), ExtResource("16_lswn8"), ExtResource("17_a6jrf"), ExtResource("5_d13ii")])

[node name="Camera3D" type="Camera3D" parent="." unique_id=799955140]
transform = Transform3D(0.9999794, -0.004570232, 0.0045086257, 0, 0.7022924, 0.7118885, -0.00641987, -0.7118738, 0.7022779, 0, 6, 6)
script = ExtResource("7_4c57u")

[node name="CameraTarget" type="Node3D" parent="." unique_id=1967595355]

[node name="Campfire" type="Node3D" parent="." unique_id=197369463]

[node name="Fire" type="Sprite3D" parent="Campfire" unique_id=404392159]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.638647, 0)
visible = false
texture = ExtResource("1_ig7tw")

[node name="OmniLight3D" type="OmniLight3D" parent="Campfire" unique_id=841154796]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.763392, 0)
light_color = Color(0.9228821, 1, 0.48046875, 1)
omni_range = 1.621
omni_attenuation = 5.315

[node name="OmniLight3D2" type="OmniLight3D" parent="Campfire" unique_id=595497951]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3878512, 0)
light_color = Color(0.7381592, 1, 0.35546875, 1)
light_energy = 0.5
shadow_enabled = true
omni_range = 10.685

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Campfire" unique_id=1465895426]
transform = Transform3D(1, 0, 0, 0, 0.97935706, 0.2021378, 0, -0.2021378, 0.97935706, 0, 0.6388743, 0)
light_color = Color(0, 0.16971773, 0.3203125, 1)
light_energy = 0.832

[node name="FireParticles" type="GPUParticles3D" parent="Campfire" unique_id=1394658753]
transform = Transform3D(0.6, 0, 0, 0, 0.6, 0, 0, 0, 0.6, 0, -0.008229256, 0)
amount = 200
process_material = SubResource("ParticleProcessMaterial_272bh")
draw_pass_1 = SubResource("QuadMesh_kek77")

[node name="Sparks" type="GPUParticles3D" parent="Campfire" unique_id=1309374242]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3389276, 0)
lifetime = 3.0
process_material = SubResource("ParticleProcessMaterial_ycdy4")
draw_pass_1 = SubResource("QuadMesh_vivmo")

[node name="ShamansContainer" type="Node3D" parent="." unique_id=1287725843]

[node name="Shaman" parent="ShamansContainer" unique_id=1026160748 instance=ExtResource("2_h2yge")]
transform = Transform3D(-0.5518674, 0, -0.83393157, 0, 1, 0, 0.83393157, 0, -0.5518674, -3.0207114, 1e-45, -1.9990041)

[node name="Shaman2" parent="ShamansContainer" unique_id=2036027695 instance=ExtResource("2_h2yge")]
transform = Transform3D(-0.55285066, 0, 0.83328015, 0, 1, 0, -0.83328015, 0, -0.55285066, 3.007548, 1e-45, -1.9953972)

[node name="Shaman3" parent="ShamansContainer" unique_id=1505500024 instance=ExtResource("2_h2yge")]
transform = Transform3D(-0.9998241, 0, -0.01875091, 0, 1, 0, 0.01875091, 0, -0.9998241, -0.06945413, 1e-45, -3.7033975)

[node name="MasksContainer" type="Node3D" parent="." unique_id=654119103]

[node name="Mask" parent="MasksContainer" unique_id=1193392792 node_paths=PackedStringArray("assigned_shaman") instance=ExtResource("3_1bvp3")]
transform = Transform3D(-0.93281037, -0.1803351, -0.31167674, 0, 0.8654526, -0.5007566, 0.36009273, -0.46715316, -0.8073901, -3.110891, 1.0018739, -2.0586815)
assigned_shaman = NodePath("../../ShamansContainer/Shaman")

[node name="Mask2" parent="MasksContainer" unique_id=1533408053 node_paths=PackedStringArray("assigned_shaman") instance=ExtResource("3_1bvp3")]
transform = Transform3D(-0.9332957, 0.17986695, 0.31057248, 0, 0.86528426, -0.50111437, -0.35890317, -0.467728, -0.80761606, 3.097657, 1.0018739, -2.0551813)
assigned_shaman = NodePath("../../ShamansContainer/Shaman2")

[node name="ModelContainer" parent="MasksContainer/Mask2" index="1" unique_id=1609231757]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.024762137, -0.8932487)

[node name="MaskClock" parent="MasksContainer/Mask2/ModelContainer" index="0" unique_id=1713705050 instance=ExtResource("11_efxa6")]

[node name="MaskNone" parent="MasksContainer/Mask2/ModelContainer" index="1" unique_id=1713705050]
visible = false

[node name="Mask3" parent="MasksContainer" unique_id=835432512 node_paths=PackedStringArray("assigned_shaman") instance=ExtResource("3_1bvp3")]
transform = Transform3D(-0.9998274, -0.0033064806, -0.0064906515, 0, 0.8909732, -0.4538435, 0.00728414, -0.4538504, -0.8909124, -0.07148182, 1.0018739, -3.811516)
assigned_shaman = NodePath("../../ShamansContainer/Shaman3")

[node name="ModelContainer" parent="MasksContainer/Mask3" index="1" unique_id=1609231757]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.024761917, -0.8932487)

[node name="MaskSwap" parent="MasksContainer/Mask3/ModelContainer" index="0" unique_id=937219786 instance=ExtResource("12_dg77c")]

[node name="MaskNone" parent="MasksContainer/Mask3/ModelContainer" index="1" unique_id=1713705050]
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="." unique_id=1911962699]
mesh = SubResource("PlaneMesh_1bvp3")

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=722427667]
environment = SubResource("Environment_dg77c")

[editable path="MasksContainer/Mask2"]
[editable path="MasksContainer/Mask3"]
